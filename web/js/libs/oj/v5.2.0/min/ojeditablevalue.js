/**
 * @license
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";define(["ojs/ojcore","jquery","hammerjs","ojs/ojjquery-hammer","promise","ojs/ojcomponentcore","ojs/ojvalidation-base","ojs/ojpopup","ojs/ojlabel","ojs/ojanimation"],function(t,e,i){t.EditableValueUtils={},t.EditableValueUtils.validationContext={COMPONENT_CREATE:1,CONVERTER_OPTION_CHANGE:2,DISABLED_OPTION_CHANGE:3,READONLY_OPTION_CHANGE:4,REFRESH_METHOD:5,REQUIRED_OPTION_CHANGE:6,RESET_METHOD:7,USER_ACTION:8,VALIDATE_METHOD:9,VALIDATORS_OPTION_CHANGE:10,VALUE_OPTION_CHANGE:11},t.EditableValueUtils.validateMethodOptions={doValueChangeCheck:!1,validationContext:t.EditableValueUtils.validationContext.VALIDATE_METHOD},t.EditableValueUtils.converterOptionOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.CONVERTER_OPTION_CHANGE},t.EditableValueUtils.disabledOptionOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.DISABLED_OPTION_CHANGE},t.EditableValueUtils.requiredOptionOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.REQUIRED_OPTION_CHANGE},t.EditableValueUtils.readOnlyOptionOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.READONLY_OPTION_CHANGE},t.EditableValueUtils.refreshMethodOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.REFRESH_METHOD},t.EditableValueUtils.validatorsOptionOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.VALIDATORS_OPTION_CHANGE};t.EditableValueUtils.CUSTOM_LABEL_ELEMENT_ID="|label",t.EditableValueUtils.VALIDATE_VALUES={VALID:"valid",INVALID:"invalid"},t.EditableValueUtils.getAttributeValue=function(t,e){var i,s={};if(t&&e){var n=t[0];switch(e){case"disabled":i=n.hasAttribute("disabled")?!!n.disabled:void 0;break;case"pattern":i=n.pattern||void 0;break;case"placeholder":i=n.placeholder||void 0;break;case"readonly":i=n.hasAttribute("readonly")?!!n.readOnly:void 0;break;case"required":var a=n.required;i=n.hasAttribute("required")?void 0===a||!!a:void 0;break;case"title":i=n.hasAttribute("title")?n.title:void 0;break;case"value":i=t.val()||void 0;break;case"min":case"max":default:i=n.getAttribute(e)||void 0}}return void 0!==i?(s.fromDom=!0,s.value=i):s.fromDom=!1,s},t.EditableValueUtils.initializeOptionsFromDom=function(e,i,s,n){for(var a={},o=0;o<e.length;o++){var l,r,u=e[o],g=u.attribute,p=u.option||g,d=u.coerceDomValue,_=u.validateOption,h=s.element,c=s.options[p];void 0===i[p]&&(c=s.options[p],(r=t.EditableValueUtils.getAttributeValue(h,g)).fromDom&&(l=r.value,d&&("boolean"==typeof d?l=t.EditableValueUtils.coerceDomValueForOption(p,l):"function"==typeof d&&(l=d.call(s,l))),a[p]=l));var E=p in a?a[p]:c;_&&"boolean"==typeof _&&t.EditableValueUtils.validateValueForOption(p,E)}null!=n&&n(a),s.option(a,{_context:{writeback:!0,internalSet:!0}})},t.EditableValueUtils.validateValueForOption=function(t,e){var i=!1;switch(t){case"required":null!==e&&"boolean"!=typeof e&&(i=!0);break;case"readOnly":case"disabled":null!==e&&"boolean"!=typeof e&&(i=!0)}if(i)throw"Option '"+t+"' has invalid value set: "+e},t.EditableValueUtils.coerceDomValueForOption=function(t,e){var i=e;switch(t){case"required":i=!!e}return i},t.EditableValueUtils.setPickerAttributes=function(t,e){if(t&&e){var i=e.class;if(i)for(var s=i.split(" "),n=0,a=s.length;n<a;++n)t[0].classList.add(s[n]);var o=e.style;if(o){var l=t[0],r=l.getAttribute("style");r?l.setAttribute("style",r+";"+o):l.setAttribute("style",o)}}},t.EditableValueUtils.getOjLabelId=function(e,i){var s,n,a,o,l,r,u;if(this.hasNoLabelFlag(e))return null;var g=e[0];if(s=g.id,a=0===(n=Array.prototype.filter.call(g.parentNode.children,function(t){return t!==g&&t.getAttribute("for")===s})).length?document.querySelector("oj-label[for='"+s+"']"):n[0]){if(u=a.getAttribute("label-id"))return u;if(o=a.id)return o+t.EditableValueUtils.CUSTOM_LABEL_ELEMENT_ID;if((l=a.querySelector("label"))&&(r=l.id),r)return r;if(i)return a.setAttribute("label-id",i),i}return null},t.EditableValueUtils.hasNoLabelFlag=function(t){return t[0].hasAttribute("data-oj-no-labelledby")},t.EditableValueUtils.validate=function(){var e,i,s=this._getAllAsyncValidators(),n=this._IsCustomElement(),a=this;return n&&s.length>0?e=this._ValidateReturnPromise():n?(i=function(){return a._ValidateReturnBoolean()?t.EditableValueUtils.VALIDATE_VALUES.VALID:t.EditableValueUtils.VALIDATE_VALUES.INVALID},e=Promise.resolve(i())):e=this._ValidateReturnBoolean(),e},t.EditableValueUtils._ValidateReturnPromise=function(){return this._SetValueReturnPromise(this._GetDisplayValue(),null,this._VALIDATE_METHOD_OPTIONS)},t.EditableValueUtils._ValidateReturnBoolean=function(){return this._SetValueReturnBoolean(this._GetDisplayValue(),null,this._VALIDATE_METHOD_OPTIONS)},t.EditableValueUtils.setSubIdForCustomLabelFor=function(t,e){t.setAttribute("id",e+"|input")},t.EditableValueUtils._updateLabelledBy=function(e,i,s){var n=t.EditableValueUtils.CUSTOM_LABEL_ELEMENT_ID;this._IsCustomElement()&&(e&&(e+=n),i&&(i+=n),e&&t.EditableValueUtils._removeAriaLabelledBy(s,e),i&&t.EditableValueUtils._addAriaLabelledBy(s,i))},t.EditableValueUtils._refreshRequired=function(t){var e,i,s,n=this._AriaRequiredUnsupported();this._refreshTheming("required",t),n||(i=this._GetContentElement(),(s=t)&&i?i[0].setAttribute("aria-required",s):i[0].removeAttribute("aria-required")),this._IsCustomElement()||(this.$label||this._createOjLabel(),this.$label&&(this.$label.ojLabel("option","showRequired",t),n&&(e=this._getAriaLabelledById(this.element))&&(t?this._addAriaDescribedBy(e+"_requiredIcon"):this._removeAriaDescribedBy(e+"_requiredIcon"))))},t.EditableValueUtils._AfterSetOptionRequired=function(e){this._refreshRequired(this._IsRequired()),this._runMixedValidationAfterSetOption(t.EditableValueUtils.requiredOptionOptions)},t.EditableValueUtils._AfterSetOptionValidators=function(){this._ResetAllValidators(),this._runFullValidationIfNeeded(t.EditableValueUtils.validatorsOptionOptions)},t.EditableValueUtils._AfterSetOptionAsyncValidators=function(){this._allAsyncValidators=null,this._updateValidatorMessagingHint(),this._runFullValidationIfNeeded(t.EditableValueUtils.validatorsOptionOptions)},t.EditableValueUtils._AfterSetOptionConverter=function(e){this._ResetConverter(),this._runFullValidationIfNeeded(t.EditableValueUtils.converterOptionOptions)||this._Refresh(e,this.options[e],!0)},t.EditableValueUtils._ResetConverter=function(){this._converter=null,this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT))},t.EditableValueUtils._GetNormalizedValidatorsFromOption=function(){var e,i,s,n,a,o,l=!0,r=[];if(s=this.options.validators)for(e=0;e<s.length;e++)"object"==typeof(i=s[e])?(i.validate&&"function"==typeof i.validate||(l=!1),l||(o=i.type)&&"string"==typeof o&&((a=t.Validation.validatorFactory(o))?((n=t.CollectionUtils.copyInto({},i.options)||{}).converter=n.converter||this._GetConverter(),n.label=n.label||this._getLabelText(),i=a.createValidator(n)):t.Logger.error("Unable to locate a validatorFactory for the requested type: "+o)),r.push(i)):t.Logger.error("Unable to parse the validator provided:"+i);return r},t.EditableValueUtils._GetNormalizedAsyncValidatorsFromOption=function(){var e,i,s,n=!0,a=[];if(s=this.options.asyncValidators)for(e=0;e<s.length;e++)"object"==typeof(i=s[e])?(i.validate&&"function"==typeof i.validate||(n=!1),n&&a.push(i)):t.Logger.error("Unable to parse the validator provided:"+i);return a},t.EditableValueUtils._GetConverter=function(){var e;return this._converter||(e=this.options.converter,this._converter=t.IntlConverterUtils.getConverterInstance(e)),this._converter||null},t.EditableValueUtils._SetBusyState=function(e){void 0===this._resolveBusyStateAsyncMap&&(this._resolveBusyStateAsyncMap=new Map);var i=this._resolveBusyStateAsyncMap.get(e);if(!i){var s=this.element[0],n=t.Context.getContext(s).getBusyContext(),a="The page is waiting for async validators for displayValue "+e;s&&s.id&&(a+=' for "'+s.id+'" '),a+="to finish.",i=n.addBusyState({description:a}),this._resolveBusyStateAsyncMap.set(e,i)}},t.EditableValueUtils._ClearBusyState=function(t){var e;void 0!==this._resolveBusyStateAsyncMap&&(e=this._resolveBusyStateAsyncMap.get(t))&&(e(),this._resolveBusyStateAsyncMap.delete(t))},t.EditableValueUtils._SetBusyStateAsyncValidatorHint=function(e){void 0===this._resolveBusyStateAsyncValidatorHintMap&&(this._resolveBusyStateAsyncValidatorHintMap=new Map);var i=this._resolveBusyStateAsyncValidatorHintMap.get(e);if(!i){var s=this.element[0],n=t.Context.getContext(s).getBusyContext(),a="The page is waiting for async validator hint for counter "+e;s&&s.id&&(a+=' for "'+s.id+'" '),a+="to finish.",i=n.addBusyState({description:a}),this._resolveBusyStateAsyncValidatorHintMap.set(e,i)}},t.EditableValueUtils._ClearBusyStateAsyncValidatorHint=function(t){var e;void 0!==this._resolveBusyStateAsyncValidatorHintMap&&(e=this._resolveBusyStateAsyncValidatorHintMap.get(t))&&(e(),this._resolveBusyStateAsyncValidatorHintMap.delete(t))},t.EditableValueUtils._addAriaLabelledBy=function(t,e){t.each(function(){var t,i=this.getAttribute("aria-labelledby");t=i?i.split(/\s+/):[],-1===t.indexOf(e)&&t.push(e),null==(i=t.join(" ").trim())?this.removeAttribute("aria-labelledBy"):this.setAttribute("aria-labelledBy",i)})},t.EditableValueUtils._removeAriaLabelledBy=function(t,e){var i;t.each(function(){var t,s;-1!==(t=(s=(i=this.getAttribute("aria-labelledby"))?i.split(/\s+/):[]).indexOf(e))&&s.splice(t,1),(i=s.join(" ").trim())?this.setAttribute("aria-labelledby",i):this.removeAttribute("aria-labelledby")})},t.EditableValueUtils._SetInputType=function(e){var i="text",s=t.AgentUtils.getAgentInfo();s.os!==t.AgentUtils.OS.ANDROID&&s.os!==t.AgentUtils.OS.IOS&&s.os!==t.AgentUtils.OS.WINDOWSPHONE||e.indexOf(this.options.virtualKeyboard)>=0&&(i=this.options.virtualKeyboard),null==i?this.element[0].removeAttribute("type"):this.element[0].setAttribute("type",i)};var s="invalidShown";t.__registerWidget("oj.editableValue",e.oj.baseComponent,{widgetEventPrefix:"oj",options:{describedBy:null,disabled:!1,displayOptions:{},help:void 0,helpHints:{definition:"",source:""},labelHint:"",messagesCustom:[],messagesHidden:void 0,messagesShown:void 0,title:"",valid:void 0,value:void 0,animateStart:null,animateEnd:null},getNodeBySubId:function(t){var e;if(!(e=this._super(t))&&!this._IsCustomElement()&&"oj-label-help-icon"===t.subId){var i=this._GetLabelElement();i&&(e=i.parent().find(".oj-label-help-icon"))}return e||null},getSubIdByNode:function(t){var i,s,n,a=null;return null!=t&&null!=(i=e(t).closest("a.oj-label-help-icon"))&&null!=(s=i.closest(".oj-label"))&&(n=s.find("label")[0])&&n==this._GetLabelElement()[0]&&(a={subId:"oj-label-help-icon"}),a},isValid:function(){return void 0===this._valid&&(this._valid=!this._hasInvalidMessages()),this._valid},refresh:function(){this._super(),this._doRefresh(!0)},reset:function(){this._clearAllMessages(),this._runDeferredValidation(this._VALIDATION_CONTEXT.RESET_METHOD),this._refreshComponentDisplayValue(this.options.value,!0)},showMessages:function(){var e,i,n,a=[],o=this.options.messagesHidden,l=o.length>0;for(e=0;e<o.length;e++)(i=o[e])instanceof t.ComponentMessage?(i._forceDisplayToShown(),n=i.clone()):n=new t.Message(i.summary,i.detail,i.severity),a.push(n);l&&(this._clearMessages("messagesHidden"),this._updateMessagesOption("messagesShown",a),this._setValidOption(s,null))},_VALIDATION_MODE:{FULL:1,VALIDATORS_ONLY:2,REQUIRED_VALIDATOR_ONLY:3},_VALIDATION_CONTEXT:t.EditableValueUtils.validationContext,_VALIDATE_METHOD_OPTIONS:t.EditableValueUtils.validateMethodOptions,_InitOptions:function(t,e){if(this._super(t,e),this._IsCustomElement()){var i=this.options.help;if(null!=i)null!=(s=i.instruction)&&(this.options.title=s);var s,n=this.options.displayOptions;if(null!=n)null!=(s=n.helpInstruction)&&(n.title=s,this.options.displayOptions=n)}},_ComponentCreate:function(){var t=this.element,e=this._GetSavedAttributes(t);if(this._super(),this.options.messagesCustom=this.options.messagesCustom||[],this.options.messagesHidden=[],this.options.messagesShown=this.options.messagesCustom.length>0?this._cloneMessagesBeforeSet(this.options.messagesCustom):[],this._SetDisabledDom(t),this._HasPlaceholderSet()&&(this._SetPlaceholder(this.options.placeholder),this._customPlaceholderSet=!0),e&&!this._IsCustomElement()){var i=t[0].tagName.toLowerCase();"input"!==i&&"textarea"!==i||["required","title","pattern"].forEach(function(i){i in e&&t.removeAttr(i)})}},_AfterCreate:function(){var t;this._super(),this._doRefresh(!1),this._IsCustomElement()?(void 0===this.customOjLabelElement&&(this.customOjLabelElement=this._getCustomOjLabelElement()),this.customOjLabelElement&&e(this.customOjLabelElement).addClass(this._GetDefaultStyleClass()+"-label"),this.customOjLabelElement&&this.customOjLabelElement.classList.add(this._GetDefaultStyleClass()+"-label")):this._createOjLabel(),(t=this.options.describedBy)&&this._addAriaDescribedBy(t),this._initComponentMessaging(),this._runDeferredValidation(this._VALIDATION_CONTEXT.COMPONENT_CREATE),this.options.messagesShown.length>0&&this._setMessagesOption("messagesShown",this.options.messagesShown,null,!0),this.widget()[0].classList.add("oj-form-control")},_SaveAttributes:function(t){this._IsCustomElement()||this._SaveAllAttributes(t)},_RestoreAttributes:function(t){this._IsCustomElement()||this._RestoreAllAttributes(t)},_AfterSetOption:function(e,i){switch(e){case"disabled":this._AfterSetOptionDisabledReadOnly(e,t.EditableValueUtils.disabledOptionOptions);break;case"displayOptions":if(this._IsCustomElement()){var s=this.options.displayOptions;if(null!=s){var n=s.helpInstruction;null!=n&&(s.title=n,this.options.displayOptions=s)}}this._initComponentMessaging();break;case"help":this._IsCustomElement()||this._Refresh(e,this.options[e]),this._IsCustomElement()&&(this.options.title=this.options.help.instruction,this._titleOptionChanged());break;case"messagesCustom":this._messagesCustomOptionChanged(i),this._setValidOption(this._determineValidFromMessagesOptions(),null);break;case"placeholder":this._placeholderOptionChanged(i);break;case"title":this._titleOptionChanged();break;case"translations":this.refresh();break;case"value":this._AfterSetOptionValue(e,i)}},_AfterSetOptionDisabledReadOnly:function(t,e){var i=!this.options[t];this._Refresh(t,this.options[t]),i&&this._runMixedValidationAfterSetOption(e)},_AfterSetOptionValue:function(t,e){var i,s=e?e._context:null,n=!1;s&&(n=!!s.originalEvent,i=s.doNotClearMessages||!1),n||(i||this._clearAllMessages(null),this._runDeferredValidation(this._VALIDATION_CONTEXT.VALUE_OPTION_CHANGE)),this._Refresh(t,this.options[t],!0)},_CanSetValue:function(){return!(this.options.disabled||!1)},_destroy:function(){var i,s,n=this._super();if(this._clearAllMessages(null,!0),this._getComponentMessaging().deactivate(),this.$label)for(s=this.$label.length,i=0;i<s;i++)this.$label[i]&&null!=t.Components.__GetWidgetConstructor(this.$label[i])&&e(this.$label[i]).ojLabel("destroy");return n},GetFocusElement:function(){return this._GetContentElement()[0]},_setOption:function(e,i,s){var n,a,o,l=!1;if("string"==typeof e&&void 0!==i)switch(e){case"messagesHidden":case"messagesShown":case"rawValue":l=!0;break;case"describedBy":o=i,(a=this.options.describedBy)&&this._removeAriaDescribedBy(a),o&&this._addAriaDescribedBy(o)}return l?(t.Logger.error(e+" option cannot be set"),this):(n=this._superApply(arguments),this._AfterSetOption(e,s),n)},_GetContentElement:function(){return this.element},_GetLabelElement:function(){var i;if(this.$label)return this.$label;if(t.EditableValueUtils.hasNoLabelFlag(this.widget()))return null;var s=this._getAriaLabelledByElement(this.element);if(null!==s&&0!==s.length)return s;var n=this.element[0].id;return void 0!==n&&0!==(s=e("label[for='"+n+"']")).length?s:0!==(i=this.element.closest("[aria-labelledby]")).length&&null!==(s=this._getAriaLabelledByElement(i))&&0!==s.length?s:null},_GetElementValue:function(){return this.element.val()},_GetMessagingLauncherElement:function(){return this._GetContentElement()},_GetConverter:function(){return null},_GetImplicitValidators:function(){return this._implicitValidators||(this._implicitValidators={}),this._implicitValidators},_GetDisplayValue:function(t){return this._GetContentElement().val()},_GetNormalizedValidatorsFromOption:function(){return[]},_GetNormalizedAsyncValidatorsFromOption:function(){return[]},_GetAllValidators:function(){var t,e,i,s,n;if(!this._allValidators){t=[],i=this._GetImplicitValidators(),s=[];var a,o=Object.keys(i),l=o.length;if(l>0){for(e=0;e<l;e++)a=o[e],s.push(i[a]);t=t.concat(s)}(n=this._GetNormalizedValidatorsFromOption()).length>0&&(t=t.concat(n)),this._allValidators=t}return this._allValidators||[]},_ResetAllValidators:function(){this._allValidators&&(this._allValidators.length=0),this._allValidators=null,this._IsCustomElement()?this._updateValidatorMessagingHint():this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS))},_runFullValidationIfNeeded:function(t,e){var i,s=!1;return this._hasInvalidMessagesShowing()&&(s=!0),e&&this._clearComponentMessages(),s&&(e||this._clearComponentMessages(),i=this._getAllAsyncValidators(),this._IsCustomElement()&&0!==i.length?this._updateValueAsync(t):this._updateValueSyncOnly(t)),s},_getAllAsyncValidators:function(){return this._allAsyncValidators||(this._allAsyncValidators=this._GetNormalizedAsyncValidatorsFromOption()),this._allAsyncValidators},_getAllAsyncValidatorsWithHint:function(){var t,e,i,s=this._getAllAsyncValidators(),n=[];if(s.length>0)for(t=Object.prototype.hasOwnProperty,e=0;e<s.length;e++)i=s[e],t.call(i,"hint")&&n.push(i);return n},_initAsyncValidatorMessagingHint:function(){var t,e,i=this._getAllAsyncValidatorsWithHint(),s=this;this._asyncValidatorHintCounter=0,i.length>0&&(e=s._getMessagingContent(s._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS),t=this._asyncValidatorHintCounter,this._setBusyStateAsyncValidatorHint(t),this._addAsyncValidatorsHintsMessagingContent(i,e).then(function(){s._clearBusyStateAsyncValidatorHint(t)}))},_updateValidatorMessagingHint:function(){var t,e=this._getAllAsyncValidatorsWithHint(),i=this._getComponentMessaging(),s=this,n=this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS);e.length>0?(this._asyncValidatorHintCounter+=1,t=this._asyncValidatorHintCounter,this._setBusyStateAsyncValidatorHint(t),this._addAsyncValidatorsHintsMessagingContent(e,n).then(function(){s._clearBusyStateAsyncValidatorHint(t)})):i.update(n)},_addAsyncValidatorsHintsMessagingContent:function(t,e){var i,s=this._asyncValidatorHintCounter,n=this._getComponentMessaging(),a=[],o=this,l=[];for(i=0;i<t.length;i++)l.push(t[i].hint);function r(t){return t.then(function(t){var i,l={};return o._asyncValidatorHintCounter===s?(a.push(t),l.validatorHint=e.validatorHint.concat(a),n.update(l),i="resolved"):i="ignore",{v:t,status:i}},function(t){return{e:t,status:"rejected"}})}return new Promise(function(t){Promise.all(l.map(r)).then(function(){t(a)})})},_IsRequired:function(){return!1},_HandleChangeEvent:function(t){var e=this._GetDisplayValue();this._SetValue(e,t)},_SetRawValue:function(t,e){var i={};i._context={originalEvent:e,writeback:!0,internalSet:!0,readOnly:!0},this._CompareOptionValues("rawValue",this.options.rawValue,t)||this.option("rawValue",t,i)},_Refresh:function(t,e,i){var s,n;switch(t){case"converter":e=this.options.value,this._refreshComponentDisplayValue(e,i);break;case"disabled":this._refreshTheming("disabled",this.options.disabled);break;case"help":this._IsCustomElement()||this.$label&&(s=this.options.help.definition,n=this.options.help.source,this.$label.ojLabel("option","help",{definition:s,source:n}),this._refreshDescribedByForLabel());break;case"value":this._refreshComponentDisplayValue(e,i)}},_NotifyHidden:function(){this._superApply(arguments),this._getComponentMessaging().close()},_NotifyDetached:function(){this._superApply(arguments),this._getComponentMessaging().close()},_ResetComponentState:function(){this.$label&&this.$label.ojLabel("refresh"),this._implicitReqValidator=null,this._converter=null,this._ResetAllValidators()},_SetDisplayValue:function(t){var e=this._GetContentElement();e.val()!==t&&e.val(t)},_SetDisabledDom:function(t){"boolean"==typeof this.options.disabled&&(t[0].disabled=this.options.disabled)},_SetPlaceholder:function(t){var e=this._GetContentElement()[0];e&&(null==t?e.removeAttribute("placeholder"):e.setAttribute("placeholder",t))},_SetPlaceholderOption:function(t){this.options.placeholder=t},_HasPlaceholderSet:function(){return this.options.placeholder},_ClearPlaceholder:function(){this._SetPlaceholderOption(""),this._SetPlaceholder("")},_SetValue:function(t,e,i){var s=this._getAllAsyncValidators();return this._IsCustomElement()&&0!==s.length?this._SetValueReturnPromise(t,e,i):this._SetValueReturnBoolean(t,e,i)},_SetValueReturnBoolean:function(e,i,s){var n,a=!s||"boolean"!=typeof s.doValueChangeCheck||s.doValueChangeCheck;if(void 0===e)return t.Logger.warn("Attempt to set a value of undefined"),!1;if(!a||e!==this._getLastDisplayValue()){var o;if(void 0!==(n=this._Validate(e,i,s))&&this.isValid())return s&&s._context&&(o=s._context),this._updateValueOption(n,i,s&&s.validationContext,o),!0;t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info((e.toString,e.toString()))}return!1},_SetValueReturnPromise:function(e,i,s){var n=!s||"boolean"!=typeof s.doValueChangeCheck||s.doValueChangeCheck,a=this;return new Promise(function(o){void 0===e&&(t.Logger.warn("Attempt to set a value of undefined"),o(t.EditableValueUtils.VALIDATE_VALUES.INVALID)),n&&e===a._getLastDisplayValue()?(t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info((e.toString,e.toString())),o(t.EditableValueUtils.VALIDATE_VALUES.INVALID)):(a._setBusyState(e),a._AsyncValidate(e,i,s).then(function(n){var l;void 0!==n&&a.isValid()?(s&&s._context&&(l=s._context),a._updateValueOption(n,i,s&&s.validationContext,l),a._clearBusyState(e),o(t.EditableValueUtils.VALIDATE_VALUES.VALID)):(a._clearBusyState(e),o(t.EditableValueUtils.VALIDATE_VALUES.INVALID))}))})},_AsyncValidate:function(e,i,n){var a,o,l=n&&n.validationMode?n.validationMode:this._VALIDATION_MODE.FULL,r=n&&n.validationContext?n.validationContext:this._VALIDATION_CONTEXT.USER_ACTION,u=n&&n.doNotClearMessages||!1,g=this;return new Promise(function(n){if(void 0===e)t.Logger.warn("Attempt to set a value of undefined"),n(void 0);else if(g._CanSetValue()){u||g._clearAllMessages(i),g._setLastSubmittedValue(e);try{g._asyncValidatorValidateCounter+=1,o=l===g._VALIDATION_MODE.FULL?g._parseValue(e,i,!0):e,g._asyncValidateValue(o,i,r).then(function(t){n("valid"===t?o:void 0)})}catch(t){a=g._processValidationErrors(t,r),g._updateMessagesOption("messagesShown",a,i),g._setValidOption(s,i),n(void 0)}}else t.Logger.level>t.Logger.LEVEL_WARN&&(t.Logger.info("Validation skipped and value option not set as component state does not  allow setting value. For example if the component is readonly or disabled."),n(void 0))})},_Validate:function(e,i,n){var a,o,l,r=n&&n.validationMode?n.validationMode:this._VALIDATION_MODE.FULL,u=n&&n.validationContext?n.validationContext:this._VALIDATION_CONTEXT.USER_ACTION,g=n&&n.doNotClearMessages||!1;if(void 0===e)t.Logger.warn("Attempt to set a value of undefined");else if(this._CanSetValue()){g||this._clearAllMessages(i),this._setLastSubmittedValue(e);try{return l=r===this._VALIDATION_MODE.FULL?this._parseValue(e,i,!0):e,(o=this._validateValue(l,i,u))&&this._setValidOption(this._determineValidFromMessagesOptions(),i),o?l:void 0}catch(t){a=this._processValidationErrors(t,u),this._updateMessagesOption("messagesShown",a,i),this._setValidOption(s,i)}}else t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("Validation skipped and value option not set as component state does not  allow setting value. For example if the component is readonly or disabled.")},_CompareOptionValues:function(e,i,s){return"value"===e||"rawValue"===e?t.Object.compareValues(i,s):0===e.indexOf("messages")?this._messagesEquals(i,s):this._superApply(arguments)},_GetDefaultStyleClass:function(){return t.Assert.failedInAbstractFunction(),""},_MESSAGING_CONTENT_UPDATE_TYPE:{ALL:1,VALIDITY_STATE:2,CONVERTER_HINT:3,VALIDATOR_HINTS:4,TITLE:5},_OPTION_TO_CSS_MAPPING:{disabled:"oj-disabled",required:"oj-required"},_clearAllMessages:function(t,e){(e=!!e)?(this.options.messagesHidden=[],this.options.messagesShown=[],this.options.messagesCustom=[]):(this._clearMessages("messagesHidden",t),this._clearMessages("messagesShown",t),this._clearMessages("messagesCustom",t))},_clearComponentMessages:function(){var e,i=this.options.messagesShown;e=i.length,this._clearMessages("messagesHidden");for(var s=e-1;s>=0;s--)i[s]instanceof t.ComponentMessage&&i.splice(s,1);i.length!==e&&this._setMessagesOption("messagesShown",i,null,!0)},_setMessagesOption:function(t,e,i,s){var n={},a=0===e.length&&0===this.options[t].length;!s&&a||(n._context={originalEvent:i,writeback:!0,internalSet:!0},"messagesCustom"!==t&&(n._context.readOnly=!0),n.changed=s||!a,this._resetValid(),this.option(t,e,n),this._updateMessagingContent())},_setValidOption:function(t,e){var i={};"pending"===t&&"valid"!==this._determineValidFromMessagesOptions()||(i._context={originalEvent:e,writeback:!0,internalSet:!0,readOnly:!0},this.option("valid",t,i))},_clearMessages:function(t,e){this._setMessagesOption(t,[],e)},_cloneMessagesBeforeSet:function(e){var i,s,n,a=[];if(e&&e.length>0)for(i=0;i<e.length;i++)n=e[i],s=new t.Message(n.summary,n.detail,n.severity),s=Object.freeze?Object.freeze(s):s,a.push(s);return a},_createOjLabel:function(){var t,e;this._IsCustomElement()||(this.$label=this._GetLabelElement(),this.$label&&(t=this.options.help.definition,e=this.options.help.source,this.$label.ojLabel({rootAttributes:{class:this._GetDefaultStyleClass()+"-label"},help:{definition:t,source:e}}),this._createDescribedByForLabel()))},_createDescribedByForLabel:function(){var t,e=this.options.help.definition;if(null!=this.options.help.source||null!=e){var i=this.$label[0];i&&(t=i.id),t&&this._addAriaDescribedBy(t+"_helpIcon")}},_refreshDescribedByForLabel:function(){var t,e=this.options.help.definition,i=this.options.help.source,s=this.$label[0];s&&(t=s.id),t&&(null!=i||null!=e?this._addAriaDescribedBy(t+"_helpIcon"):this._removeAriaDescribedBy(t+"_helpIcon"))},_doRefresh:function(e){if(e){this._ResetComponentState(),this._initComponentMessaging();this._runFullValidationIfNeeded(t.EditableValueUtils.refreshMethodOptions,!0)||(this._IsRequired()&&this._runDeferredValidation(t.EditableValueUtils.refreshMethodOptions.validationContext),this._Refresh("value",this.options.value,!0))}else this._Refresh("value",this.options.value);this._Refresh("disabled",this.options.disabled)},_getLastModelValue:function(){return this._oj_lastModelValue},_getLastDisplayValue:function(){return void 0===this._oj_lastElementValue&&(this._oj_lastElementValue=""),this._oj_lastElementValue},_getAriaLabelledByElement:function(t){var i=t[0].getAttribute("aria-labelledby");return void 0!==i?e("label[id='"+i+"']"):null},_getAriaLabelledById:function(t){var e=null,i=this._getAriaLabelledByElement(t);return null!==i&&0!==i.length&&(e=i[0].getAttribute("id")),e},_addAriaDescribedBy:function(t){this._GetContentElement().each(function(){var e,i=this.getAttribute("aria-describedby");e=i?i.split(/\s+/):[],-1===e.indexOf(t)&&e.push(t),null==(i=e.join(" ").trim())?this.removeAttribute("aria-describedby"):this.setAttribute("aria-describedby",i)})},_removeAriaDescribedBy:function(t){this._GetContentElement().each(function(){var e,i,s;-1!==(i=(s=(e=this.getAttribute("aria-describedby"))?e.split(/\s+/):[]).indexOf(t))&&s.splice(i,1),(e=s.join(" ").trim())?this.setAttribute("aria-describedby",e):this.removeAttribute("aria-describedby")})},_getMessages:function(){return this.options.messagesShown.concat(this.options.messagesHidden)},_getCustomOjLabelElement:function(){var e,i,s=null,n=this.options.labelledBy,a=this.widget();if(n&&(s=document.getElementById(n)),null===s&&!t.EditableValueUtils.hasNoLabelFlag(a)){var o=a[0];(i=o.id)&&(s=0===(e=Array.prototype.filter.call(o.parentNode.children,function(t){return t!==o&&t.getAttribute("for")===i})).length?document.querySelector("[for='"+this.element.id+"']"):e[0])}return s},_getLabelText:function(){return this.$label?this.$label[0].textContent:(void 0===this.customOjLabelElement&&(this.customOjLabelElement=this._getCustomOjLabelElement()),this.customOjLabelElement?this.customOjLabelElement.textContent:null)},_getValidityState:function(){return this._validityState?this._validityState:(this._validityState=new t.ComponentValidity(this.isValid(),this._getMessages()),this._validityState)},_hasInvalidMessages:function(){return!t.Message.isValid(this._getMessages())},_hasInvalidMessagesShowing:function(){return!this.isValid()&&this.options.messagesShown.length>0},_hasInvalidComponentMessagesShowing:function(){for(var e,i,s=this.options.messagesShown,n=0;n<s.length;n++)(i=s[n])instanceof t.ComponentMessage&&i._isMessageAddedByComponent()&&(e=e||[]).push(i);return void 0!==e&&!t.Message.isValid(e)},_initComponentMessaging:function(){var t=this._getComponentMessaging(),e=this._GetMessagingLauncherElement(),i=this._GetContentElement(),s=this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.ALL);this._customPlaceholderSet||this._ClearPlaceholder(),t.activate(e,i,s),this._IsCustomElement()&&(this._initAsyncValidatorMessagingHint(),this._asyncValidatorValidateCounter=0)},_messagesCustomOptionChanged:function(e){var i,s,n=e?e._context:null,a=this.options.messagesCustom,o=this.options.messagesShown,l=[];for(i=0;i<o.length;i++)(s=o[i])instanceof t.ComponentMessage&&s._isMessageAddedByComponent()&&l.push(s);for(i=0;i<a.length;i++)l.push(a[i]);this._setMessagesOption("messagesShown",l,n?n.originalEvent:null,e&&e.changed)},_placeholderOptionChanged:function(t){var e=!(t&&t._context||{}).internalMessagingSet,i=this.options.placeholder;this._SetPlaceholder(i),e?(this._customPlaceholderSet=!0,this._GetConverter()&&this._initComponentMessaging()):this._customPlaceholderSet=!1},_setLastModelValue:function(t){this._oj_lastModelValue=t},_setLastSubmittedValue:function(t){this._oj_lastElementValue=t},_titleOptionChanged:function(){this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE))},_updateMessagesOption:function(t,e,i){var s,n,a;if("object"==typeof e&&Array.isArray(e))for(a=this.options[t],n=e.length,s=0;s<n;s++)a.push(e[s]);this._setMessagesOption(t,a,i,!0)},_updateMessagingContent:function(){this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE))},_updateValueOption:function(t,e,i,s){var n=s||{};switch(e&&(n.originalEvent=e),i){case this._VALIDATION_CONTEXT.CONVERTER_OPTION_CHANGE:case this._VALIDATION_CONTEXT.DISABLED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.READONLY_OPTION_CHANGE:case this._VALIDATION_CONTEXT.REFRESH_METHOD:case this._VALIDATION_CONTEXT.REQUIRED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.VALIDATE_METHOD:case this._VALIDATION_CONTEXT.VALIDATORS_OPTION_CHANGE:n.writeback=!0,n.doNotClearMessages=!0}n.internalSet=!0,this.option({value:t},{_context:n}),this._AfterSetOptionValue("value",{_context:n})},_resetValid:function(){this._valid=void 0},_determineValidFromMessagesOptions:function(){var e=this.options.messagesHidden,i=this.options.messagesShown,n="valid";return i&&0!==i.length&&!t.Message.isValid(i)?n=s:e&&0!==e.length&&!t.Message.isValid(e)&&(n="invalidHidden"),n},_formatValue:function(e){var i=e,s=this._GetConverter();return s&&"object"==typeof s&&(s.format&&"function"==typeof s.format?i=s.format(e):t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("converter does not support the format method.")),i},_getComponentMessaging:function(){return this._componentMessaging||(this._componentMessaging=new t.ComponentMessaging(this)),this._componentMessaging},_getHintsForAllValidators:function(t){var e,i,s=[],n="";for(this._IsRequired()&&(i=this._getImplicitRequiredValidator()).getHint&&"function"==typeof i.getHint&&(n=i.getHint())&&s.push(n),e=0;e<t.length;e++)n="","object"==typeof(i=t[e])&&i.getHint&&"function"==typeof i.getHint&&(n=i.getHint())&&s.push(n);return s},_getImplicitRequiredValidator:function(){var e,i,s={};return null==this._implicitReqValidator&&(i={hint:(s=this.options.translations&&this.options.translations.required||{}).hint||null,label:this._getLabelText(),messageSummary:s.messageSummary||null,messageDetail:s.messageDetail||null},e=t.Validation.validatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_REQUIRED),this._implicitReqValidator=e?e.createValidator(i):null),this._implicitReqValidator},_getMessagingContent:function(t){var e,i,s,n={},a="",o=[];return(t=t||this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE)!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&t!==this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE||(s=this._getMessages(),this._getValidityState().update(this.isValid(),s),n.validityState=this._getValidityState()),t!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&t!==this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT||((i=this._GetConverter())&&"object"==typeof i&&i.getHint&&"function"==typeof i.getHint&&(a=i.getHint()||""),n.converterHint=a),t!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&t!==this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS||(e=this._GetAllValidators(),o=this._getHintsForAllValidators(e)||[],n.validatorHint=o),t!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&t!==this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE||(n.title=this.options.title||""),n},_messagesEquals:function(i,s){var n,a=-1,o=!0,l=e.extend([],i),r=e.extend([],s);return l.length===r.length&&(l.forEach(function(e){e instanceof t.Message?n=e:(n=new t.Message(e.summary,e.detail,e.severity),n=Object.freeze?Object.freeze(n):n),a=-1,r.forEach(function(e,i){t.Message.getSeverityLevel(n.severity)!==t.Message.getSeverityLevel(e.severity)||n.summary!==e.summary||n.detail!==e.detail||(a=i)}),a>-1?r.splice(a,1):o=!1}),o)},_parseValue:function(e,i,s){var n=this._GetConverter(),a=e;if(n&&"object"==typeof n)if(n.parse&&"function"==typeof n.parse)try{s&&this._setValidOption("pending",i),a=n.parse(e)}catch(t){throw t}else t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("converter does not support the parse method.");return a},_addValidationError:function(e,i){var s,n,a,o;e instanceof t.ConverterError||e instanceof t.ValidatorError?(n=(a=e.getMessage()).severity||t.Message.SEVERITY_LEVEL.ERROR,o=a.summary||t.Translations.getTranslatedString("oj-message.error"),s=a.detail||t.Translations.getTranslatedString("oj-converter.detail")):e.summary||e.detail?(n=t.Message.SEVERITY_LEVEL.ERROR,o=e.summary||t.Translations.getTranslatedString("oj-message.error"),s=e.detail||t.Translations.getTranslatedString("oj-converter.detail")):(n=t.Message.SEVERITY_LEVEL.ERROR,o=t.Translations.getTranslatedString("oj-message.error"),s=e.message||t.Translations.getTranslatedString("oj-converter.detail")),i.push({summary:o,detail:s,severity:n})},_processValidationErrors:function(e,i,s){var n,a=[],o=e._messages||[],l={};l.context=i||0,l.display=s||t.ComponentMessage.DISPLAY.SHOWN,0===o.length&&this._addValidationError(e,o);for(var r=0;r<o.length;r++)n=o[r],a.push(this._createComponentMessage(n.summary,n.detail,n.severity,l));return a||null},_createComponentMessage:function(e,i,s,n){var a;return a=new t.ComponentMessage(e,i,s,n),a=Object.seal?Object.seal(a):a},_refreshComponentDisplayValue:function(t,e){(e||t!==this._getLastModelValue())&&this._updateElementDisplayValue(t)},_refreshTheming:function(t,e){-1!==Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(t)&&(e?this.widget()[0].classList.add(this._OPTION_TO_CSS_MAPPING[t]):this.widget()[0].classList.remove(this._OPTION_TO_CSS_MAPPING[t]))},_runDeferredValidation:function(e){this._CanSetValue()?this._validateValueForRequiredOnly(this.options.value,e):t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("Deferred validation skipped as component is readonly or disabled."),this._setValidOption(this._determineValidFromMessagesOptions(),null)},_runMixedValidationAfterSetOption:function(t){!this._runFullValidationIfNeeded(t,!0)&&this._IsRequired()?this._runDeferredValidation(t.validationContext):this._setValidOption(this._determineValidFromMessagesOptions(),null)},_updateElementDisplayValue:function(t,e){var i,s,n;this._setLastModelValue(t),s=t;try{s=this._formatValue(t)}catch(t){n=this._processValidationErrors(t),this._updateMessagesOption("messagesShown",n,e)}this._SetDisplayValue(s),i=this._GetDisplayValue(),this._setLastSubmittedValue(i),this._SetRawValue(i,null)},_updateValueSyncOnly:function(t){var e=this._Validate(this._GetDisplayValue(),null,t);void 0===e||!this.isValid()&&this._hasInvalidComponentMessagesShowing()||this._updateValueOption(e,null,t.validationContext)},_updateValueAsync:function(t){var e=this,i=this._GetDisplayValue();e._setBusyState(i),this._AsyncValidate(i,null,t).then(function(s){void 0===s||!e.isValid()&&e._hasInvalidComponentMessagesShowing()||e._updateValueOption(s,null,t.validationContext),e._clearBusyState(i)})},_validateValueForRequiredOnly:function(e,i){var s,n;if(this._IsRequired()){n=this._getImplicitRequiredValidator();try{this._setValidOption("pending",null),n.validate(t.StringUtils.trim(e))}catch(e){(s=this._processValidationErrors(e,i,t.ComponentMessage.DISPLAY.HIDDEN))&&this._updateMessagesOption("messagesHidden",s)}}},_validateValue:function(e,i,n){var a,o,l,r,u=this._GetAllValidators(),g=this._IsRequired(),p=!1,d=[];if((g||u.length>0)&&this._setValidOption("pending",i),g){l=this._getImplicitRequiredValidator();try{l.validate(t.StringUtils.trim(e))}catch(t){this._addValidationError(t,d),this._setValidOption(s,i),p=!0}}for(a=0;a<u.length;a++)if("object"==typeof(l=u[a]))if(l.validate&&"function"==typeof l.validate)try{l.validate(e)}catch(t){this._addValidationError(t,d),p||(this._setValidOption(s,i),p=!0)}else t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("validator does not support the validate method.");return d.length>0&&((r=new Error)._messages=d,o=this._processValidationErrors(r,n),this._updateMessagesOption("messagesShown",o,i)),0===d.length},_asyncValidateValue:function(e,i,n){var a,o,l,r,u=this._getAllAsyncValidators(),g=!1,p=u.length>0,d=this,_=this._asyncValidatorValidateCounter;p&&this._setValidOption("pending",i),r=this._validateValue(e,i,n),p||r&&this._setValidOption(d._determineValidFromMessagesOptions(),i);var h=[];for(a=0;a<u.length;a++)h.push(u[a].validate(t.StringUtils.trim(e)));function c(a){return a.then(function(i){var s;return d._asyncValidatorValidateCounter===_?s="resolved":(t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("Validate ignored because new value came in before async validator finished for "+e),s="ignore"),{v:i,status:s}},function(a){var o;return d._asyncValidatorValidateCounter===_?(l=d._processValidationErrors(a,n),d._updateMessagesOption("messagesShown",l,i),g||(d._setValidOption(s,i),g=!0),o="rejected"):(t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("Validate ignored because new value came in before async validator finished for "+e),o="ignore"),{e:a,status:o}})}return new Promise(function(t){Promise.all(h.map(c)).then(function(e){e.filter(function(t){return"ignore"===t.status}).length>0?o="ignoreValidation":(o=g?s:"valid",d._setValidOption(d._determineValidFromMessagesOptions(),i)),t(o)})})},_setBusyState:t.EditableValueUtils._SetBusyState,_clearBusyState:t.EditableValueUtils._ClearBusyState,_setBusyStateAsyncValidatorHint:t.EditableValueUtils._SetBusyStateAsyncValidatorHint,_clearBusyStateAsyncValidatorHint:t.EditableValueUtils._ClearBusyStateAsyncValidatorHint},!0),t.Components.setDefaultOptions({editableValue:{displayOptions:t.Components.createDynamicPropertyGetter(function(t){var e={messages:t.containers.indexOf("ojDataGrid")>=0||t.containers.indexOf("ojTable")>=0?["notewindow"]:["inline"],converterHint:["placeholder","notewindow"],validatorHint:["notewindow"]};return e[t.isCustomElement?"helpInstruction":"title"]=["notewindow"],e}),help:t.Components.createDynamicPropertyGetter(function(t){return t.isCustomElement?{instruction:""}:{definition:null,source:null}})}}),t.InlineMessagingStrategy=function(t){this.Init(t)},t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._DISPLAY_TYPE.INLINE,t.InlineMessagingStrategy),t.Object.createSubclass(t.InlineMessagingStrategy,t.MessagingStrategy,"oj.InlineMessagingStrategy"),t.InlineMessagingStrategy.prototype.reactivate=function(e){t.InlineMessagingStrategy.superclass.reactivate.call(this,e),this._updateInlineMessage()},t.InlineMessagingStrategy.prototype.shouldUpdate=function(t){return!(!t||void 0===t.validityState)},t.InlineMessagingStrategy.prototype.update=function(){t.InlineMessagingStrategy.superclass.update.call(this),this._updateInlineMessage()},t.InlineMessagingStrategy.prototype.deactivate=function(){this._removeMessagingContentRootDom(),t.InlineMessagingStrategy.superclass.deactivate.call(this)},t.InlineMessagingStrategy.prototype._getDefaultAnimation=function(){if(!t.InlineMessagingStrategy._defaultAnimation){var e=(t.ThemeUtils.parseJSONFromFontFamily("oj-messaging-inline-option-defaults")||{}).animation;e=e||{},t.InlineMessagingStrategy._defaultAnimation=e}return t.InlineMessagingStrategy._defaultAnimation},t.InlineMessagingStrategy.prototype._replaceAnimationOptions=function(e,i){var s,n;for(var a in t.StringUtils.isString(e)?(n=!0,s=e+""):(n=!1,s=JSON.stringify(e)),i)s=s.replace(new RegExp(a,"g"),i[a]);return e=n?s:JSON.parse(s)},t.InlineMessagingStrategy.prototype._determineAnimation=function(t,e){var i,s,n,a=this._getDefaultAnimation();if(a){var o,l=t[0],r=t[0].innerHTML,u=l.offsetHeight;t[0].innerHTML=e,o=l.offsetHeight,t[0].innerHTML=r,(s=a[i=o>u?"open":"close"])&&(n=this._replaceAnimationOptions(s,{"#oldHeight":u+"px","#newHeight":o+"px"}))}return{action:i,effect:n}},t.InlineMessagingStrategy.prototype._setBusyState=function(){if(!this._resolveBusyState){var e=this.GetComponent(),i=e?e.element:null,s=i?i[0]:null,n=t.Context.getContext(s).getBusyContext(),a="The page is waiting for inline message ";s&&s.id&&(a+='for "'+s.id+'" '),a+="to open/close",this._resolveBusyState=n.addBusyState({description:a})}},t.InlineMessagingStrategy.prototype._clearBusyState=function(){this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},t.InlineMessagingStrategy.prototype._queueAction=function(e){var i=this,s=this.$messagingContentRoot;this._setBusyState(),this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){if(i._timeoutId=null,s&&s[0]){var n=i._determineAnimation(s,e),a=n.action,o=n.effect;"close"===a?s[0].setAttribute("aria-live","off"):s[0].setAttribute("aria-live","polite"),"open"==a&&(s[0].innerHTML=e),t.AnimationUtils.startAnimation(s[0],"inline-"+a,o,i.GetComponent()).then(function(){"close"===a&&(s[0].setAttribute("aria-live","polite"),s[0].innerHTML=e),i._clearBusyState()})}else i._clearBusyState()},0)},t.InlineMessagingStrategy.prototype._updateInlineMessage=function(){var t;(t=this._buildInlineHtml())&&null==this.$messagingContentRoot&&this._createInlineMessage(),this.$messagingContentRoot&&this.$messagingContentRoot[0]&&(this.GetComponent()._IsCustomElement()?this._queueAction(t):t?this.$messagingContentRoot[0].innerHTML=t:this._removeMessagingContentRootDom())},t.InlineMessagingStrategy.prototype._createInlineMessage=function(){this.$messagingContentRoot=e(this._getInlineContentHtml()),this._addAriaDescribedBy(this.$messagingContentRoot),this._addAriaLive(this.$messagingContentRoot),this.GetComponent().widget()[0].appendChild(this.$messagingContentRoot[0])},t.InlineMessagingStrategy.prototype._getInlineContentHtml=function(){return"<div class='oj-messaging-inline-container'></div>"},t.InlineMessagingStrategy.prototype._removeMessagingContentRootDom=function(){if(null!=this.$messagingContentRoot){var t=this.$messagingContentRoot[0];this._removeAriaDescribedBy(this.$messagingContentRoot),t.parentNode.removeChild(t),this.$messagingContentRoot=null}},t.InlineMessagingStrategy.prototype._addAriaDescribedBy=function(i){var s,n,a,o,l=(n=this.GetLauncher())[0];t.Assert.assertPrototype(n,e),t.Assert.assertPrototype(i,e),a=i.uniqueId()[0].getAttribute("id"),(o=(s=l.getAttribute("aria-describedby"))?s.split(/\s+/):[]).push(a),null==(s=o.join(" ").trim())?l.removeAttribute("aria-describedby"):l.setAttribute("aria-describedby",s)},t.InlineMessagingStrategy.prototype._addAriaLive=function(i){t.Assert.assertPrototype(i,e),i[0].setAttribute("aria-live","polite")},t.InlineMessagingStrategy.prototype._removeAriaDescribedBy=function(i){var s,n,a,o,l;a=this.GetLauncher(),t.Assert.assertPrototype(a,e),t.Assert.assertPrototype(i,e),o=i[0].getAttribute("id"),-1!==(n=(l=(s=a[0].getAttribute("aria-describedby"))?s.split(/\s+/):[]).indexOf(o))&&l.splice(n,1),(s=l.join(" ").trim())?a[0].setAttribute("aria-describedby",s):a[0].removeAttribute("aria-describedby")},t.InlineMessagingStrategy.prototype._buildInlineHtml=function(){var t;return this.ShowMessages()?(t=this.GetComponent().document[0],this._buildMessagesHtml(t)):""},t.InlineMessagingStrategy.prototype._buildMessagesHtml=function(e){var i,s,n="";return this.HasMessages()&&(s=this.GetMessages(),i=this.GetMaxSeverity(),n=t.PopupMessagingStrategyUtils.buildMessagesHtml(e,s,i,!0)),n},t.PopupMessagingStrategy=function(t){this.Init(t)},t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW,t.PopupMessagingStrategy),t.Object.createSubclass(t.PopupMessagingStrategy,t.MessagingStrategy,"oj.PopupMessagingStrategy"),t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT={ojRadioset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojCheckboxset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojInputText:{position:"launcher",events:{open:"focusin"}},ojTextArea:{position:"launcher",events:{open:"focusin"}},ojInputPassword:{position:"launcher",events:{open:"focusin"}},ojSwitch:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojSlider:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorSpectrum:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorPalette:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},default:{position:"launcher-wrapper",events:{open:"focusin"}}},t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT="oj-form-control-hint",t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER="oj-form-control-hint-converter",t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR="oj-form-control-hint-validator",t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE="oj-form-control-hint-title",t.PopupMessagingStrategy._OPEN_NAMESPACE=".ojPopupMessagingOpen",t.PopupMessagingStrategy._CLOSE_NAMESPACE=".ojPopupMessagingClose",t.PopupMessagingStrategy.prototype.activate=function(e){t.PopupMessagingStrategy.superclass.activate.call(this,e),this._initMessagingPopup()},t.PopupMessagingStrategy.prototype.reactivate=function(e){t.PopupMessagingStrategy.superclass.reactivate.call(this,e),this._updatePopupIfOpen()},t.PopupMessagingStrategy.prototype.update=function(){t.PopupMessagingStrategy.superclass.update.call(this),this._updatePopupIfOpen()},t.PopupMessagingStrategy.prototype.deactivate=function(){this._unregisterLauncherEvents(),this._destroyTooltip(),t.PopupMessagingStrategy.superclass.deactivate.call(this)},t.PopupMessagingStrategy.prototype.close=function(){this._closePopup()},t.PopupMessagingStrategy.prototype._closePopup=function(){this._queueAction(function(t){if(this._isPopupInitialized())return t&&this._setActionResolver(this.$messagingContentRoot,"close",t),void this.$messagingContentRoot.ojPopup("close");t&&t(!0)}.bind(this))},t.PopupMessagingStrategy.prototype._initMessagingPopup=function(){this._openPopupCallback||this._registerLauncherEvents()},t.PopupMessagingStrategy.prototype._addAnimateEventListeners=function(t){var e=function(t,e,i){var s=this.GetComponent();s&&s._trigger&&(e.stopPropagation(),s._trigger(t,null,i)||e.preventDefault())};t.on("ojanimatestart.notewindow",e.bind(this,"animateStart")),t.on("ojanimateend.notewindow",e.bind(this,"animateEnd"))},t.PopupMessagingStrategy.prototype._removeAnimateEventListeners=function(t){t.off("ojanimatestart.notewindow"),t.off("ojanimateend.notewindow")},t.PopupMessagingStrategy.prototype._setBusyState=function(e){var i=this.GetComponent(),s=i?i.element:null,n=s?s[0]:null,a=t.Context.getContext(n).getBusyContext(),o="The page is waiting for note window ";return n&&n.id&&(o+='for "'+n.id+'" '),o+="to "+e,a.addBusyState({description:o})},t.PopupMessagingStrategy.prototype._setActionResolver=function(t,e,i){var s;this._actionCount>1&&(s=t.ojPopup("option","animation"),t.ojPopup("option","animation",null));var n=this._setBusyState(e);t.one("oj"+e,function(){s&&t.ojPopup("option","animation",s),n(),i(!0)})},t.PopupMessagingStrategy.prototype._queueAction=function(t){if(this.GetComponent()._IsCustomElement()){var e=this,i=function(t){var i=new Promise(t);return i.then(function(){--e._actionCount}),i};this._actionCount?(++this._actionCount,this._actionPromise=this._actionPromise.then(function(){return i(t)})):(this._actionCount=1,this._actionPromise=i(t))}else t(null)},t.PopupMessagingStrategy.prototype._openPopup=function(e){this._queueAction(function(i){var s,n,a;if(this._canOpenPopup()&&(n=this._buildPopupHtml(),!t.StringUtils.isEmptyOrUndefined(n))){var o=this._getPopupElement(),l=o.ojPopup("isOpen");if((s=t.PopupMessagingStrategyPoolUtils.getPopupContentNode(o)).innerHTML="",s.innerHTML=n,!l)return a=this.GetLauncher(),"press"===e.type&&this._openPopupOnPressEvent(a),i&&this._setActionResolver(o,"open",i),void o.ojPopup("open",a);l&&o.ojPopup("refresh")}i&&i(!0)}.bind(this))},t.PopupMessagingStrategy.prototype._openPopupOnPressEvent=function(t){this._inPressEvent=!0,t[0].addEventListener("click",this._eatChangeAndClickOnPress,!0),t[0].addEventListener("change",this._eatChangeAndClickOnPress,!0),t.one("touchend",function(t){setTimeout(function(){this._inPressEvent=!1},50)})},t.PopupMessagingStrategy.prototype._eatChangeAndClickOnPress=function(t){this._inPressEvent&&(t.preventDefault(),t.stopPropagation(),"click"===t.type&&(this._inPressEvent=!1))},t.PopupMessagingStrategy.prototype._canOpenPopup=function(){var t=this.GetComponent().options,e=t.disabled||!1,i=t.readOnly||!1;return!(e||i)},t.PopupMessagingStrategy.prototype._updatePopupIfOpen=function(){var e,i,s,n,a=!1;if(this._isPopupInitialized()){if(a=(n=this._getPopupElement()).ojPopup("isOpen"),e=this._buildPopupHtml(),null==this.GetLauncher())return;s=document.activeElement===this.GetLauncher()[0],a?e?((i=t.PopupMessagingStrategyPoolUtils.getPopupContentNode(n)).innerHTML="",i.innerHTML=e,n.ojPopup("refresh")):n.ojPopup("close"):s&&e&&this._openPopup(void 0)}},t.PopupMessagingStrategy.prototype._unregisterLauncherEvents=function(){var e,i=this.GetLauncher();(e=t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?e.events:t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.events,i.off(t.PopupMessagingStrategy._OPEN_NAMESPACE),i.off(t.PopupMessagingStrategy._CLOSE_NAMESPACE),i[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),i[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0),t.DomUtils.isTouchSupported()&&(i.ojHammer().off("press"),i.ojHammer("destroy"),i.off("contextmenu",this._eatContextMenuOnOpenPopupListener),this._eatContextMenuOnOpenPopupListener=null,this._inPressEvent=null),this._openPopupCallback=null,this._closePopupCallback=null},t.PopupMessagingStrategy.prototype._registerLauncherEvents=function(){var e,s,n,a,o,l,r,u,g=this.GetLauncher();(a=(n=t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?n.events:t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.events).open&&((r=this._openPopupCallback)||(r=this._openPopupCallback=this._openPopup.bind(this)),u=a.open.indexOf("press"),l=this._getNamespacedEvents(a.open.replace("press",""),t.PopupMessagingStrategy._OPEN_NAMESPACE),g.on(l,r),t.DomUtils.isTouchSupported()&&(this._eatContextMenuOnOpenPopupListener=function(t){return!1},g.on("contextmenu",this._eatContextMenuOnOpenPopupListener),-1!==u&&(o={recognizers:[[i.Press,{time:750}]]},g.ojHammer(o).on("press",r)))),a.close&&((s=this._closePopupCallback)||(s=this._closePopupCallback=this._closePopup.bind(this)),e=this._getNamespacedEvents(a.close,t.PopupMessagingStrategy._CLOSE_NAMESPACE),g.on(e,s))},t.PopupMessagingStrategy.prototype._getNamespacedEvents=function(t,e){var i,s,n;if(""===t||""===e)return t;n=(i=t.split(" ")).length,s=[];for(var a=0;a<n;a++)i[a]&&s.push(i[a]+e);return s.join(" ")},t.PopupMessagingStrategy.prototype._getPopupPosition=function(){var e,i,s;return(e=(i=t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?i.position:t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.position)&&("launcher"===e?s=this.GetLauncher():"launcher-wrapper"===e&&(s=this.GetLauncher().parent())),s||(s=this.GetComponent().widget()),{my:"start bottom",at:"end top",collision:"flipcenter",of:s}},t.PopupMessagingStrategy.prototype._getPopupElement=function(){var e,i;if(this.$messagingContentRoot)return this.$messagingContentRoot;if(e=t.PopupMessagingStrategyPoolUtils.getNextFreePopup(),i=this._getPopupPosition(),e.ojPopup("option","position",i),e.ojPopup("option","beforeClose",this._popupBeforeCloseCallback.bind(this)),e.ojPopup("option","close",this._popupCloseCallback.bind(this)),e.ojPopup("option","open",this._popupOpenCallback.bind(this)),this.GetComponent()._IsCustomElement()){var s=(t.ThemeUtils.parseJSONFromFontFamily("oj-messaging-popup-option-defaults")||{}).animation;s.actionPrefix="notewindow",e.ojPopup("option","animation",s),this._addAnimateEventListeners(e)}else e.ojPopup("option","animation",null);return this.$messagingContentRoot=e,this.$messagingContentRoot},t.PopupMessagingStrategy.prototype._popupOpenCallback=function(i){var s=e(i.target),n=this;window.setTimeout(function(){t.Components.isComponentInitialized(s,"ojPopup")?s.ojPopup("option","autoDismiss","focusLoss"):delete n.$messagingContentRoot},10)},t.PopupMessagingStrategy.prototype._popupBeforeCloseCallback=function(t){this._resolveBusyState=this._setBusyState("close")},t.PopupMessagingStrategy.prototype._popupCloseCallback=function(i){var s,n;s=this.GetLauncher(),n=e(i.target),this._removeAnimateEventListeners(n),t.Components.isComponentInitialized(n,"ojPopup")&&(n.ojPopup("option","autoDismiss","none"),n.ojPopup("option","open",null),n.ojPopup("option","close",null),n.ojPopup("option","beforeClose",null)),s&&s[0]&&(s[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),s[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0)),this.$messagingContentRoot=null,this._inPressEvent=null,t.PopupMessagingStrategyPoolUtils.getPopupContentNode(n).innerHTML="",this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},t.PopupMessagingStrategy.prototype._destroyTooltip=function(){this._closePopup(),t.PopupMessagingStrategyPoolUtils.destroyFreePopup()},t.PopupMessagingStrategy.prototype._buildPopupHtml=function(){var e=!1,i=this.GetComponent().document[0],s=[],n="";return this.ShowMessages()&&s.push(this._buildMessagesHtml(i)),(this.ShowConverterHint()||this.ShowValidatorHint()||this.ShowTitle())&&s.push(this._buildHintsHtml(i)),s.forEach(function(s){s&&(e?n=n.concat(t.PopupMessagingStrategyUtils.getSeparatorHtml(i)):e=!0,n=n.concat(s))}),n},t.PopupMessagingStrategy.prototype._buildMessagesHtml=function(e){var i,s="",n=this.GetMaxSeverity();return this.HasMessages()&&(i=this.GetMessages(),s=t.PopupMessagingStrategyUtils.buildMessagesHtml(e,i,n,!1)),s},t.PopupMessagingStrategy.prototype._buildHintsHtml=function(e){var i,s,n=[],a="";if(this.ShowConverterHint()&&(i=(n=this.GetConverterHint()).length?n[0]:"",a+=t.PopupMessagingStrategyUtils.buildHintHtml(e,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER,i,!1,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),this.ShowValidatorHint())for(n=this.GetValidatorHints(),s=0;s<n.length;s++)a+=t.PopupMessagingStrategyUtils.buildHintHtml(e,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR,n[s],!1,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT);return this.ShowTitle()&&(a+=t.PopupMessagingStrategyUtils.buildHintHtml(e,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE,this.GetTitle(),!0,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),a?"<div class='oj-form-control-hints'>"+a+"</div>":""},t.PopupMessagingStrategy.prototype._isPopupInitialized=function(){return!!this.$messagingContentRoot&&t.Components.isComponentInitialized(this.$messagingContentRoot,"ojPopup")},t.PopupMessagingStrategyUtils={},t.PopupMessagingStrategyUtils.buildHintHtml=function(e,i,s,n,a){var o;if(s){o=e.createElement("div");for(var l=a.split(" "),r=0,u=l.length;r<u;++r)o.classList.add(l[r]);o.classList.add(i),t.PopupMessagingStrategyUtils._appendTextDom(o,t.PopupMessagingStrategyUtils._getTextDom(e,s,n))}return o?o.outerHTML:""},t.PopupMessagingStrategyUtils.getSeverityTranslatedString=function(e){var i;switch(e){case t.Message.SEVERITY_LEVEL.FATAL:i=t.Translations.getTranslatedString("oj-message.fatal");break;case t.Message.SEVERITY_LEVEL.ERROR:i=t.Translations.getTranslatedString("oj-message.error");break;case t.Message.SEVERITY_LEVEL.WARNING:i=t.Translations.getTranslatedString("oj-message.warning");break;case t.Message.SEVERITY_LEVEL.INFO:i=t.Translations.getTranslatedString("oj-message.info");break;case t.Message.SEVERITY_LEVEL.CONFIRMATION:i=t.Translations.getTranslatedString("oj-message.confirmation")}return i},t.PopupMessagingStrategyUtils.getSeparatorHtml=function(t){var i;return(i=e(t.createElement("hr")))?i.get(0).outerHTML:""},t.PopupMessagingStrategyUtils.buildMessagesHtml=function(e,i,s,n){var a,o,l,r,u,g,p,d,_="",h=[],c={};for(o=0;o<i.length;o++)u=(r=i[o])instanceof t.Message?r:new t.Message(r.summary,r.detail,r.severity),c[g=t.Message.getSeverityLevel(u.severity)]||(c[g]=[]),c[g].push(u);for(o=s;o>=t.Message.SEVERITY_LEVEL.CONFIRMATION;o--)for(h=c[o]||[],l=0;l<h.length;l++)r=h[l],g=t.Message.getSeverityLevel(r.severity),p=t.PopupMessagingStrategyUtils.getSeverityTranslatedString(g),d=r.summary||p,a=r.detail||"",_=_.concat(t.PopupMessagingStrategyUtils.buildMessageHtml(e,d,a,g,n));return _},t.PopupMessagingStrategyUtils.buildMessageHtml=function(e,i,s,n,a){var o,l,r,u,g,p=t.PopupMessagingStrategyUtils.getSeverityTranslatedString(n);if((r=e.createElement("div")).classList.add(t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE),a)for(var d=t.PopupMessagingStrategyUtils._getSeveritySelector(n).split(" "),_=0,h=d.length;_<h;++_)r.classList.add(d[_]);u=e.createElement("span");for(var c=t.PopupMessagingStrategyUtils._getSeverityIconSelector(n).split(" "),E=0,m=c.length;E<m;++E)u.classList.add(c[E]);if(null==p?u.removeAttribute("title"):u.setAttribute("title",p),u.setAttribute("role","img"),r.appendChild(u),(o=e.createElement("span")).classList.add(t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT),(g=e.createElement("div")).classList.add(t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY),g.textContent=i,o.appendChild(g),s){var S=t.PopupMessagingStrategyUtils._getTextDom(e,s,!0);(l=e.createElement("div")).classList.add(t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL),t.PopupMessagingStrategyUtils._appendTextDom(l,S),o.appendChild(l)}return r.appendChild(o),r.outerHTML},t.PopupMessagingStrategyUtils._getSeverityIconSelector=function(e){var i;switch(e){case t.Message.SEVERITY_LEVEL.FATAL:case t.Message.SEVERITY_LEVEL.ERROR:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON;break;case t.Message.SEVERITY_LEVEL.WARNING:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON;break;case t.Message.SEVERITY_LEVEL.INFO:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON;break;case t.Message.SEVERITY_LEVEL.CONFIRMATION:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON}return t.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS+i},t.PopupMessagingStrategyUtils._getSeveritySelector=function(e){var i;switch(e){case t.Message.SEVERITY_LEVEL.FATAL:case t.Message.SEVERITY_LEVEL.ERROR:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR;break;case t.Message.SEVERITY_LEVEL.WARNING:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING;break;case t.Message.SEVERITY_LEVEL.INFO:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO;break;case t.Message.SEVERITY_LEVEL.CONFIRMATION:default:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION}return i},t.PopupMessagingStrategyUtils._getTextDom=function(e,i,s){var n=null;return t.StringUtils.isString(i)&&(s&&t.DomUtils.isHTMLContent(i)?n=t.DomUtils.cleanHtml(i.substring(6,i.length-7)):(n=e.createElement("span")).textContent=i),n},t.PopupMessagingStrategyUtils._appendTextDom=function(e,i){t.StringUtils.isString(i)?e.innerHTML=i:e.appendChild(i)},t.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS="oj-component-icon oj-message-status-icon ",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE="oj-message",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY="oj-message-summary",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL="oj-message-detail",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT="oj-message-content",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON="oj-message-error-icon",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON="oj-message-warning-icon",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON="oj-message-info-icon",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON="oj-message-confirmation-icon",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR="oj-message-error",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING="oj-message-warning",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO="oj-message-info",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION="oj-message-confirmation",t.PopupMessagingStrategyPoolUtils={},t.PopupMessagingStrategyPoolUtils.getNextFreePopup=function(){var i,s=t.PopupMessagingStrategyPoolUtils._getPool(),n=s.find("."+t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING);if(0===n.length){(i=e(t.PopupMessagingStrategyPoolUtils._getPopupContentHtml()))[0].style.display="none",i.appendTo(s);i.ojPopup({initialFocus:"none",tail:"simple",autoDismiss:"none",modality:"modeless",animation:{open:null,close:null}})}else i=e(n[0]);return i},t.PopupMessagingStrategyPoolUtils.getPopupContentNode=function(e){return e.find("."+t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER)[0]},t.PopupMessagingStrategyPoolUtils.destroyFreePopup=function(){var e;if(t.PopupMessagingStrategyPoolUtils._getFreePoolCount()>0){var i=(e=t.PopupMessagingStrategyPoolUtils.getNextFreePopup())[0];e.ojPopup("destroy"),i.parentNode.removeChild(i)}},t.PopupMessagingStrategyPoolUtils._getPool=function(){var i=e("#"+t.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID);if(i.length>0)return i;var s=(i=e("<div>"))[0];return s.setAttribute("id",t.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID),s.setAttribute("role","presentation"),document.body.appendChild(s),i},t.PopupMessagingStrategyPoolUtils._getFreePoolCount=function(){return t.PopupMessagingStrategyPoolUtils._getPool().find("."+t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING).length},t.PopupMessagingStrategyPoolUtils._getPopupContentHtml=function(){return'<div class="'+t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING+'"><div class="'+t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER+'"></div></div>'},t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER="oj-messaging-popup-container",t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING="oj-messaging-popup",t.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID="__oj_messaging_popup_pool",t.CustomElementBridge.registerMetadata("editableValue","baseComponent",{extension:{_WIDGET_NAME:"editableValue"}})});
