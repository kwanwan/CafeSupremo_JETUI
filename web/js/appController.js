define(["ojs/ojcore","knockout","ojs/ojmodule-element-utils","config/appconfig","ojs/ojmodule-element","ojs/ojrouter","ojs/ojknockout","ojs/ojarraytabledatasource","ojs/ojoffcanvas"],function(e,o,r,a){return new function(){var t=this;t.userid=new o.observable;var n=a.get("rewardsEnabled"),l=e.ResponsiveUtils.getFrameworkQuery(e.ResponsiveUtils.FRAMEWORK_QUERY_KEY.SM_ONLY);t.smScreen=e.ResponsiveKnockoutUtils.createMediaQueryObservable(l);var s=e.ResponsiveUtils.getFrameworkQuery(e.ResponsiveUtils.FRAMEWORK_QUERY_KEY.MD_UP);t.mdScreen=e.ResponsiveKnockoutUtils.createMediaQueryObservable(s),t.router=e.Router.rootInstance,t.router.configure({welcome:{label:"Cafe Supremo",isDefault:!0},discover:{label:"DISCOVER COFFEE"},store:{label:"STORES"},reward:{label:"REWARDS"},unavailable:{label:"UNAVAILABLE"}}),e.Router.defaults.urlAdapter=new e.Router.urlParamAdapter,t.moduleConfig=o.observable({view:[],viewModel:null}),t.loadModule=function(){o.computed(function(){var e=t.router.moduleConfig.name(),o="views/"+e+".html",a="viewModels/"+e;Promise.all([r.createView({viewPath:o}),r.createViewModel({viewModelPath:a})]).then(function(e){t.moduleConfig({view:e[0],viewModel:e[1]})})})},console.log("disabled: "+!n),t.navDataSourceX=new o.observableArray([{name:"Welcome",id:"welcome",disabled:!1},{name:"Discover",id:"discover",disabled:!1},{name:"Stores",id:"store",disabled:!1},{name:"Rewards",id:"reward",disabled:""+!n}]),t.navDataSource=new e.ArrayTableDataSource(t.navDataSourceX(),{idAttribute:"id"}),t.mdScreen.subscribe(function(){e.OffcanvasUtils.close(t.drawerParams)}),t.drawerParams={displayMode:"push",selector:"#navDrawer",content:"#pageContent"},t.toggleDrawer=function(){return e.OffcanvasUtils.toggle(t.drawerParams)},$("#navDrawer").on("ojclose",function(){$("#drawerToggleButton").focus()}),t.title=o.pureComputed(function(){return t.router.currentState().label},this)}});
